# üé® –ê–£–î–ò–¢ FRONTEND - PBK CRM UNIFIED

**–î–∞—Ç–∞ –∞—É–¥–∏—Ç–∞:** 2026-01-05  
**–ê—É–¥–∏—Ç–æ—Ä:** OpenCode AI Assistant  
**–í–µ—Ä—Å–∏—è:** Next.js 14.0.4, React 18.2.0  
**–û—Ö–≤–∞—Ç:** 69 —Ñ–∞–π–ª–æ–≤, 10,186 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞  

---

## üìä –ö–†–ê–¢–ö–û–ï –†–ï–ó–Æ–ú–ï

### –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞: **6.2/10** ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê

**–°—Ç–∞—Ç—É—Å:** üü° **–¢–†–ï–ë–£–ï–¢ –£–õ–£–ß–®–ï–ù–ò–ô**

### –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã ‚úÖ
- ‚úÖ –•–æ—Ä–æ—à–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ Next.js 14 (App Router)
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ API rewrites —á–µ—Ä–µ–∑ nginx
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ (React Query –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ, dnd-kit)
- ‚úÖ –ò–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è (i18n) –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞
- ‚úÖ –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–π UI —Å react-hot-toast –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- ‚úÖ –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ —Å –≤–∫–ª–∞–¥–∫–∞–º–∏ –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã ‚ùå
- ‚ùå **–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ HTTP** - –Ω–µ—Ç response interceptor
- ‚ùå **–ù–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ 401/403** - —Ä–∏—Å–∫ –∑–∞–≤–∏—Å–∞–Ω–∏—è –ø—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Ç–æ–∫–µ–Ω–∞
- ‚ùå **TypeScript strict: false** - —Å–ª–∞–±–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- ‚ùå **ignoreBuildErrors: true** - –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ TypeScript
- ‚ùå **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ accessibility** - 0 ARIA-–∞—Ç—Ä–∏–±—É—Ç–æ–≤ –Ω–∞ 69 —Ñ–∞–π–ª–æ–≤
- ‚ùå **–ù–µ—Ç —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç–∏** - –ø–æ—á—Ç–∏ –Ω–µ—Ç data-testid
- ‚ùå **61 console.log –≤ production** - –æ—Ç–ª–∞–¥–æ—á–Ω—ã–π –∫–æ–¥ –Ω–µ —É–¥–∞–ª–µ–Ω
- ‚ùå **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ try-catch** –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚ùå **–£—Å—Ç–∞—Ä–µ–≤—à–∞—è Next.js 14.0.4** (—Ç–µ–∫—É—â–∞—è: 14.2.x/15.x)

---

## üìÅ –ê–ù–ê–õ–ò–ó –°–¢–†–£–ö–¢–£–†–´

### –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (Next.js 14 App Router)

```
frontend/
‚îú‚îÄ‚îÄ app/                         # Next.js 14 App Router
‚îÇ   ‚îú‚îÄ‚îÄ calls/                   # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–≤–æ–Ω–∫–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ clients/                 # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ dashboard/               # –ì–ª–∞–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å
‚îÇ   ‚îú‚îÄ‚îÄ emails/                  # Email-–º–æ–¥—É–ª—å
‚îÇ   ‚îú‚îÄ‚îÄ integrations/            # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ kanban/                  # –ö–∞–Ω–±–∞–Ω-–¥–æ—Å–∫–∞ (DnD)
‚îÇ   ‚îú‚îÄ‚îÄ leads/                   # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–∏–¥–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ login/                   # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ pipelines/               # –ü–∞–π–ø–ª–∞–π–Ω—ã –ø—Ä–æ–¥–∞–∂
‚îÇ   ‚îú‚îÄ‚îÄ projects/                # –ü—Ä–æ–µ–∫—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ proposals/               # –ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ settings/                # –ù–∞—Å—Ç—Ä–æ–π–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ tasks/                   # –ó–∞–¥–∞—á–∏
‚îÇ   ‚îú‚îÄ‚îÄ test-api/                # –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ API
‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx               # –ö–æ—Ä–Ω–µ–≤–æ–π layout
‚îÇ   ‚îú‚îÄ‚îÄ page.tsx                 # Landing page
‚îÇ   ‚îî‚îÄ‚îÄ globals.css              # –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏
‚îÇ
‚îú‚îÄ‚îÄ components/                  # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ ai/                      # AI Copilot
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AICopilot.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AICopilotChat.tsx
‚îÇ   ‚îú‚îÄ‚îÄ layout/                  # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–∑–º–µ—Ç–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AppLayout.tsx        # ‚ö†Ô∏è Inline styles –≤–º–µ—Å—Ç–æ CSS
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Header.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Sidebar.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Providers.tsx        # ‚ö†Ô∏è –ü—É—Å—Ç–æ–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ modals/                  # –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ClientModal.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ LeadModal.tsx
‚îÇ   ‚îî‚îÄ‚îÄ ui/                      # UI-–ø—Ä–∏–º–∏—Ç–∏–≤—ã
‚îÇ       ‚îú‚îÄ‚îÄ Button.tsx
‚îÇ       ‚îú‚îÄ‚îÄ Input.tsx
‚îÇ       ‚îî‚îÄ‚îÄ Textarea.tsx
‚îÇ
‚îú‚îÄ‚îÄ lib/                         # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ api.ts                   # ‚ö†Ô∏è API –∫–ª–∏–µ–Ω—Ç (–Ω–µ—Ç error handling)
‚îÇ   ‚îú‚îÄ‚îÄ translations.ts          # i18n (—Ç–æ–ª—å–∫–æ —Ä—É—Å—Å–∫–∏–π)
‚îÇ   ‚îî‚îÄ‚îÄ utils.ts
‚îÇ
‚îú‚îÄ‚îÄ public/                      # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ next.config.js               # ‚ö†Ô∏è ignoreBuildErrors: true
‚îú‚îÄ‚îÄ tsconfig.json                # ‚ö†Ô∏è strict: false
‚îú‚îÄ‚îÄ tailwind.config.js
‚îî‚îÄ‚îÄ package.json
```

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- üìÑ **69 —Ñ–∞–π–ª–æ–≤** (TypeScript/JavaScript)
- üìù **10,186 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞**
- üìë **15 —Å—Ç—Ä–∞–Ω–∏—Ü** (Next.js routes)
- üß© **~34 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞**

---

## üîç –î–ï–¢–ê–õ–¨–ù–´–ô –ê–ù–ê–õ–ò–ó –ü–û –ö–ê–¢–ï–ì–û–†–ò–Ø–ú

---

## 1. API –ö–õ–ò–ï–ù–¢ –ò –û–ë–†–ê–ë–û–¢–ö–ê –û–®–ò–ë–û–ö

**–§–∞–π–ª:** `frontend/lib/api.ts` (98 —Å—Ç—Ä–æ–∫)

### ‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´ (P0)

#### **P0-1: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ Response Interceptor**
**–§–∞–π–ª:** `lib/api.ts:14-20`  
**–ü—Ä–æ–±–ª–µ–º–∞:**
```typescript
// –ï—Å—Ç—å –¢–û–õ–¨–ö–û request interceptor
api.interceptors.request.use((config) => {
  const token = typeof window !== 'undefined' ? localStorage.getItem('token') : null;
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});

// ‚ùå –ù–ï–¢ response interceptor!
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –ü—Ä–∏ `401 Unauthorized` –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ `/login`
- –ü—Ä–∏ `403 Forbidden` –Ω–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –ü—Ä–∏ `500 Server Error` –Ω–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –ö–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–∞–º –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ (–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞)

**–ü—Ä–∏–º–µ—Ä –ø—Ä–æ–±–ª–µ–º—ã:**
```typescript
// –í dashboard/page.tsx:28-38
fetch(getApiUrl('/api/dashboard/metrics'), {
  headers: { 'Authorization': `Bearer ${token}` }
})
  .then(res => res.json())
  .then(data => {
    if (data.success) {
      setMetrics(data.data);
    }
    setLoading(false);
  })
  .catch(() => setLoading(false)); // ‚ùå –ü—Ä–æ—Å—Ç–æ —Å–∫—Ä—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É!
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å `api.interceptors.response.use()` –¥–ª—è:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/login` –ø—Ä–∏ 401
- –ì–ª–æ–±–∞–ª—å–Ω—ã–µ toast-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π refresh —Ç–æ–∫–µ–Ω–∞ (–µ—Å–ª–∏ –±—É–¥–µ—Ç JWT refresh)

---

#### **P0-2: –ù–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ API**
**–†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ:** –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–∞–∂–¥–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥—É–±–ª–∏—Ä—É–µ—Ç –∫–æ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫:
```typescript
// leads/page.tsx:31-42
try {
  const response = await fetch(getApiUrl('/api/leads'), {
    headers: { 'Authorization': `Bearer ${token}` }
  });
  const data = await response.json();
  if (data.success) {
    setLeads(data.data);
  }
} catch (error) {
  console.error('Error loading leads:', error); // ‚ùå –¢–æ–ª—å–∫–æ console
  toast.error(t('Failed to load data'));        // –í—Ä—É—á–Ω—É—é
}
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- –°–æ–∑–¥–∞—Ç—å —Ö—É–∫ `useApi()` —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `@tanstack/react-query` (—É–∂–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö!)

---

### ‚ö†Ô∏è –í–´–°–û–ö–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢ (P1)

#### **P1-1: localStorage –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ SSR**
**–§–∞–π–ª:** –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å auth

**–ü—Ä–æ–±–ª–µ–º–∞:**
```typescript
// login/page.tsx:60
localStorage.setItem('token', token); // ‚ùå –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ typeof window
```

**–•–æ—Ä–æ—à–æ –≤:** `lib/api.ts:15`
```typescript
const token = typeof window !== 'undefined' ? localStorage.getItem('token') : null; ‚úÖ
```

**–ù–æ –ø–ª–æ—Ö–æ –≤ 10+ –º–µ—Å—Ç–∞—Ö:**
```typescript
// dashboard/page.tsx:24
const token = localStorage.getItem('token'); // ‚ùå
if (!token) return;
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –°–æ–∑–¥–∞—Ç—å —Ö–µ–ª–ø–µ—Ä `getToken()` —Å SSR-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é.

---

#### **P1-2: –ù–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ api.ts**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–ª–æ–≤–∏–Ω–∞ –∫–æ–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `axios` —á–µ—Ä–µ–∑ `api.ts`, –ø–æ–ª–æ–≤–∏–Ω–∞ - `fetch()`:

**Axios (—á–µ—Ä–µ–∑ api.ts):**
```typescript
// lib/api.ts:30-38
export const authAPI = {
  login: async (credentials: { email: string; password: string }) => {
    return await api.post('/auth/login', credentials);
  },
};
```

**fetch() (–æ–±—Ö–æ–¥–∏—Ç api.ts):**
```typescript
// login/page.tsx:33
const response = await fetch(`/api/auth/login`, { ... }); // ‚ùå –û–±—Ö–æ–¥–∏—Ç axios
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- Interceptors –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç –¥–ª—è `fetch()`
- –ù–µ—Ç –µ–¥–∏–Ω–æ–π —Ç–æ—á–∫–∏ –∫–æ–Ω—Ç—Ä–æ–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¢–û–õ–¨–ö–û `api.ts` –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.

---

## 2. TYPESCRIPT –ò –¢–ò–ü–ò–ó–ê–¶–ò–Ø

**–§–∞–π–ª:** `tsconfig.json`

### ‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´ (P0)

#### **P0-3: strict: false - –æ—Ç–∫–ª—é—á–µ–Ω–∞ —Å—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è**
**–§–∞–π–ª:** `tsconfig.json:6`
```json
{
  "compilerOptions": {
    "strict": false,  // ‚ùå –ö–†–ò–¢–ò–ß–ù–û!
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –†–∞–∑—Ä–µ—à–µ–Ω—ã `any` —Ç–∏–ø—ã –±–µ–∑ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
- –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ `null`/`undefined`
- –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

**–ü—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–±–ª–µ–º:**
```typescript
// leads/page.tsx:12
const [leads, setLeads] = useState<any[]>([]); // ‚ùå any –≤–º–µ—Å—Ç–æ Lead[]

// components/modals/LeadModal.tsx:18
const [lead, setLead] = useState<any>(null);  // ‚ùå any

// clients/page.tsx:9
const [clients, setClients] = useState<any[]>([]); // ‚ùå any
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
1. –í–∫–ª—é—á–∏—Ç—å `"strict": true`
2. –°–æ–∑–¥–∞—Ç—å `types/models.ts` —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏:
```typescript
interface Lead {
  id: string;
  title: string;
  value: number;
  probability: number;
  client_id?: string;
  pipeline_id: string;
  stage_id: string;
  created_at: string;
  // ...
}
```

---

#### **P0-4: ignoreBuildErrors: true**
**–§–∞–π–ª:** `next.config.js:10`
```javascript
typescript: {
  ignoreBuildErrors: true  // ‚ùå –û–ß–ï–ù–¨ –û–ü–ê–°–ù–û!
}
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- Build –ø—Ä–æ—Ö–æ–¥–∏—Ç –¥–∞–∂–µ —Å –æ—à–∏–±–∫–∞–º–∏ TypeScript
- –û—à–∏–±–∫–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ runtime
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ —Ç–∏–ø—ã

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –£–¥–∞–ª–∏—Ç—å —ç—Ç—É –æ–ø—Ü–∏—é –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ –æ—à–∏–±–∫–∏ TypeScript.

---

## 3. –ú–ê–†–®–†–£–¢–ò–ó–ê–¶–ò–Ø –ò –ù–ê–í–ò–ì–ê–¶–ò–Ø

**–û—Ü–µ–Ω–∫–∞:** 7/10 ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ä–æ—à–æ:
- Next.js 14 App Router –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–º–µ—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É `page.tsx`
- –ï—Å—Ç—å –∫–æ—Ä–Ω–µ–≤–æ–π `layout.tsx` —Å –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏

### ‚ö†Ô∏è –°–†–ï–î–ù–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢ (P2)

#### **P2-1: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç middleware –¥–ª—è –∑–∞—â–∏—Ç—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–∞–∂–¥–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–∞–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç auth:
```typescript
// dashboard/page.tsx:23-26
useEffect(() => {
  const token = localStorage.getItem('token');
  if (!token) return;
  // ...
});
```

**–î—É–±–ª–∏—Ä—É–µ—Ç—Å—è –≤:**
- `leads/page.tsx:24-28`
- `clients/page.tsx:17`
- `tasks/page.tsx` (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –°–æ–∑–¥–∞—Ç—å `middleware.ts`:
```typescript
// middleware.ts
export function middleware(request: NextRequest) {
  const token = request.cookies.get('token');
  if (!token && !request.nextUrl.pathname.startsWith('/login')) {
    return NextResponse.redirect(new URL('/login', request.url));
  }
}

export const config = {
  matcher: ['/((?!login|api|_next/static|_next/image|favicon.ico).*)']
};
```

---

#### **P2-2: Hardcoded navigation –≤–º–µ—Å—Ç–æ –∫–æ–Ω—Ñ–∏–≥–∞**
**–§–∞–π–ª:** `components/layout/AppLayout.tsx:33-42`
```typescript
const navItems = [
  { name: '–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è', path: '/dashboard', icon: 'üìä' },
  { name: '–ö–∞–Ω–±–∞–Ω', path: '/kanban', icon: 'üî•' },
  // ... 8 –ø—É–Ω–∫—Ç–æ–≤
];
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã—Ç—å –ø—É–Ω–∫—Ç—ã –ø–æ —Ä–æ–ª—è–º
- –ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –º–µ–Ω—é
- –≠–º–æ–¥–∑–∏ –≤–º–µ—Å—Ç–æ SVG-–∏–∫–æ–Ω–æ–∫ (–ø–ª–æ—Ö–æ –¥–ª—è a11y)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –í—ã–Ω–µ—Å—Ç–∏ –≤ `lib/navigation.ts` —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–æ–ª–µ–π:
```typescript
interface NavItem {
  name: string;
  path: string;
  icon: React.ComponentType;
  roles?: string[]; // –í–∏–¥–∏–º–æ—Å—Ç—å –ø–æ —Ä–æ–ª—è–º
}
```

---

## 4. –ö–û–ú–ü–û–ù–ï–ù–¢–´ –ò –ü–ï–†–ï–ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï

**–û—Ü–µ–Ω–∫–∞:** 6.5/10 ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ä–æ—à–æ:
- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ (`LeadModal`, `ClientModal`) - —Ö–æ—Ä–æ—à–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –≤–∫–ª–∞–¥–∫–∞–º–∏
- UI-–ø—Ä–∏–º–∏—Ç–∏–≤—ã (`Button`, `Input`, `Textarea`)
- DnD Kanban –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `@dnd-kit` (—Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞)

### ‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–´

#### **P1-3: AppLayout –∏—Å–ø–æ–ª—å–∑—É–µ—Ç inline styles –≤–º–µ—Å—Ç–æ CSS**
**–§–∞–π–ª:** `components/layout/AppLayout.tsx:44-125`
```typescript
const styles = {
  container: {
    display: 'flex',
    minHeight: '100vh',
    fontFamily: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',
  },
  sidebar: {
    width: '250px',
    background: '#1f2937',
    // ... 80 —Å—Ç—Ä–æ–∫ inline styles
  },
};
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —á–µ—Ä–µ–∑ CSS
- –ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ç–µ–º–∏–∑–∞—Ü–∏–∏
- –ü–ª–æ—Ö–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (—Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–∞ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ)
- –ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é TailwindCSS

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å –Ω–∞ Tailwind CSS –∫–ª–∞—Å—Å—ã.

---

#### **P2-3: Providers.tsx –∞–±—Å–æ–ª—é—Ç–Ω–æ –ø—É—Å—Ç–æ–π**
**–§–∞–π–ª:** `components/layout/Providers.tsx:1-6`
```typescript
'use client';

export function Providers({ children }: { children: React.ReactNode }) {
  return <>{children}</>;
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∏–≥–¥–µ
- –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö –µ—Å—Ç—å `@tanstack/react-query`, –Ω–æ QueryProvider –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω
- –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö –µ—Å—Ç—å `zustand`, –Ω–æ —Å—Ç–æ—Ä –Ω–µ —Å–æ–∑–¥–∞–Ω

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
1. –£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª, –µ—Å–ª–∏ –Ω–µ –Ω—É–∂–µ–Ω
2. –ò–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å `QueryClientProvider` –¥–ª—è React Query:
```typescript
'use client';

import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
import { useState } from 'react';

export function Providers({ children }: { children: React.ReactNode }) {
  const [queryClient] = useState(() => new QueryClient());
  
  return (
    <QueryClientProvider client={queryClient}>
      {children}
    </QueryClientProvider>
  );
}
```

---

#### **P2-4: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–∞—Ç—Ç–µ—Ä–Ω fetch + setState –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è 20+ —Ä–∞–∑:

**–î—É–±–ª–∏—Ä—É–µ—Ç—Å—è:**
```typescript
// leads/page.tsx:23-44
const loadLeads = async () => {
  const token = localStorage.getItem('token');
  if (!token) {
    window.location.href = '/login';
    return;
  }

  try {
    const response = await fetch(getApiUrl('/api/leads'), {
      headers: { 'Authorization': `Bearer ${token}` }
    });
    const data = await response.json();
    if (data.success) {
      setLeads(data.data);
    }
  } catch (error) {
    console.error('Error loading leads:', error);
    toast.error(t('Failed to load data'));
  } finally {
    setLoading(false);
  }
};
```

**–ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π –∫–æ–¥ –≤:**
- `clients/page.tsx`
- `dashboard/page.tsx`
- `kanban/page.tsx`
- `calls/page.tsx`
- –ò —Ç.–¥.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –°–æ–∑–¥–∞—Ç—å —Ö—É–∫ `useApiQuery`:
```typescript
function useApiQuery<T>(endpoint: string) {
  const [data, setData] = useState<T | null>(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<Error | null>(null);

  useEffect(() => {
    // ... –µ–¥–∏–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏
  }, [endpoint]);

  return { data, loading, error, refetch };
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
const { data: leads, loading, error } = useApiQuery<Lead[]>('/api/leads');
```

---

## 5. –£–ü–†–ê–í–õ–ï–ù–ò–ï –°–û–°–¢–û–Ø–ù–ò–ï–ú

**–û—Ü–µ–Ω–∫–∞:** 5/10 ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
- **useState** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–µ–∑–¥–µ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- **zustand** - —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ‚ùå
- **@tanstack/react-query** - —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ‚ùå
- **–ù–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å—Ç–æ—Ä–∞** –¥–ª—è user, auth, settings

### ‚ùå –ü–†–û–ë–õ–ï–ú–´

#### **P1-4: –ù–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ auth state**
**–ü—Ä–æ–±–ª–µ–º–∞:** –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ localStorage –≤–µ–∑–¥–µ:
```typescript
// AppLayout.tsx:23
const userData = JSON.parse(localStorage.getItem('user') || '{}');
setUser(userData);

// dashboard/page.tsx:24
const token = localStorage.getItem('token');

// leads/page.tsx:24
const token = localStorage.getItem('token');
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –ü—Ä–∏ logout –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –≤—Ä—É—á–Ω—É—é
- –ù–µ—Ç —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –°–æ–∑–¥–∞—Ç—å `lib/store/auth.ts` (zustand):
```typescript
import { create } from 'zustand';

interface AuthState {
  user: User | null;
  token: string | null;
  login: (user: User, token: string) => void;
  logout: () => void;
}

export const useAuthStore = create<AuthState>((set) => ({
  user: null,
  token: null,
  login: (user, token) => {
    localStorage.setItem('token', token);
    localStorage.setItem('user', JSON.stringify(user));
    set({ user, token });
  },
  logout: () => {
    localStorage.removeItem('token');
    localStorage.removeItem('user');
    set({ user: null, token: null });
  }
}));
```

---

#### **P2-5: React Query –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞, –Ω–æ –Ω–∏–≥–¥–µ –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ React Query:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–µ—à –∑–∞–ø—Ä–æ—Å–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π refetch –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ –æ–∫–Ω–∞
- –ó–∞–≥—Ä—É–∑–∫–∞/–æ—à–∏–±–∫–∞ –∏–∑ –∫–æ—Ä–æ–±–∫–∏
- Devtools –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –≤—Å–µ—Ö API –∑–∞–ø—Ä–æ—Å–æ–≤:
```typescript
import { useQuery } from '@tanstack/react-query';

function LeadsPage() {
  const { data: leads, isLoading, error } = useQuery({
    queryKey: ['leads'],
    queryFn: () => api.get('/leads').then(res => res.data)
  });

  // –ù–µ—Ç –Ω—É–∂–¥—ã –≤ useState, useEffect, try-catch!
}
```

---

## 6. UI/UX –ò –î–û–°–¢–£–ü–ù–û–°–¢–¨ (ACCESSIBILITY)

**–û—Ü–µ–Ω–∫–∞:** 4/10 ‚≠ê‚≠ê‚≠ê‚≠ê

### ‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´

#### **P0-5: –ü–û–õ–ù–û–ï –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ ARIA-–∞—Ç—Ä–∏–±—É—Ç–æ–≤**
**–§–∞–∫—Ç:** `grep -r "aria-\|role=" frontend/app --include="*.tsx" | wc -l` = **0**

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –ù–µ—Ç `aria-label` –Ω–∞ –∏–∫–æ–Ω–æ—á–Ω—ã—Ö –∫–Ω–æ–ø–∫–∞—Ö
- –ù–µ—Ç `role="alert"` –Ω–∞ error messages
- –ù–µ—Ç `aria-live` –Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–º –∫–æ–Ω—Ç–µ–Ω—Ç–µ
- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –Ω–µ –∏–º–µ—é—Ç `role="dialog"`, `aria-modal="true"`

**–ü—Ä–∏–º–µ—Ä –ø—Ä–æ–±–ª–µ–º—ã:**
```typescript
// components/modals/LeadModal.tsx:496-501
<button
  onClick={onClose}
  className="text-gray-400 hover:text-gray-600"
>
  <XMarkIcon className="h-6 w-6" /> {/* ‚ùå –ù–µ—Ç aria-label */}
</button>
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```typescript
<button
  onClick={onClose}
  aria-label="–ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ"
  className="text-gray-400 hover:text-gray-600"
>
  <XMarkIcon className="h-6 w-6" />
</button>
```

---

#### **P0-6: –ù–µ—Ç —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏—Ö HTML-—Ç–µ–≥–æ–≤**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–≤—Å–µ–º–µ—Å—Ç–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è `<div>` –≤–º–µ—Å—Ç–æ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ–≥–æ–≤:

```typescript
// AppLayout.tsx:132-152
<div style={styles.container}>  {/* ‚ùå –î–æ–ª–∂–Ω–æ –±—ã—Ç—å <div> */}
  <aside style={styles.sidebar}> {/* ‚úÖ –•–æ—Ä–æ—à–æ */}
    <div style={styles.logo}>    {/* ‚ùå –î–æ–ª–∂–Ω–æ –±—ã—Ç—å <header> */}
      <h1>...</h1>
    </div>
    <nav style={styles.nav}>     {/* ‚úÖ –•–æ—Ä–æ—à–æ */}
      ...
    </nav>
  </aside>
  
  <main style={styles.main}>     {/* ‚úÖ –•–æ—Ä–æ—à–æ */}
    <header style={styles.header}> {/* ‚úÖ –•–æ—Ä–æ—à–æ */}
```

**–ß–∞—Å—Ç–∏—á–Ω–æ —Ö–æ—Ä–æ—à–æ**, –Ω–æ –º–Ω–æ–≥–æ `<div>` –≥–¥–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å:
- `<article>` –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫
- `<section>` –¥–ª—è —Å–µ–∫—Ü–∏–π
- `<button>` –≤–º–µ—Å—Ç–æ `<div onClick>`

---

#### **P1-5: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ keyboard navigation**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–æ `Esc`, –Ω–µ—Ç focus trap.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É `@headlessui/react` –¥–ª—è:
- Dialog —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º Esc
- Focus trap
- ARIA –∏–∑ –∫–æ—Ä–æ–±–∫–∏

---

### ‚ö†Ô∏è UX –ü–†–û–ë–õ–ï–ú–´

#### **P2-6: 61 console.log –≤ production –∫–æ–¥–µ**
**–§–∞–∫—Ç:** `grep -r "console\.log" frontend/app | wc -l` = 61

**–ü—Ä–∏–º–µ—Ä—ã:**
```typescript
// login/page.tsx:25-27
console.log('=== LOGIN ATTEMPT ===');
console.log('Email:', formData.email);
console.log('Password length:', formData.password.length);

// login/page.tsx:44-54
console.log('=== LOGIN RESPONSE ===');
console.log('Status:', response.status);
console.log('Success! Got result:', result);
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
1. –°–æ–∑–¥–∞—Ç—å `lib/logger.ts`:
```typescript
const isDev = process.env.NODE_ENV === 'development';

export const logger = {
  log: (...args: any[]) => isDev && console.log(...args),
  error: (...args: any[]) => isDev && console.error(...args),
};
```
2. –ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ `console.log` –Ω–∞ `logger.log`

---

#### **P2-7: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ loading skeletons**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–æ—Å—Ç–æ —Å–ø–∏–Ω–Ω–µ—Ä:
```typescript
// dashboard/page.tsx:54-60
if (loading) {
  return (
    <AppLayout>
      <div className="flex justify-center items-center h-96">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-gold-500"></div>
      </div>
    </AppLayout>
  );
}
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å skeleton screens –¥–ª—è –ª—É—á—à–µ–≥–æ UX:
```typescript
<div className="space-y-4">
  {[1,2,3].map(i => (
    <div key={i} className="animate-pulse">
      <div className="h-4 bg-gray-200 rounded w-3/4"></div>
      <div className="h-4 bg-gray-200 rounded w-1/2 mt-2"></div>
    </div>
  ))}
</div>
```

---

#### **P2-8: –≠–º–æ–¥–∑–∏ –≤–º–µ—Å—Ç–æ SVG-–∏–∫–æ–Ω–æ–∫**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–∞–≤–∏–≥–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç–º–æ–¥–∑–∏:
```typescript
// AppLayout.tsx:34-41
{ name: '–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è', path: '/dashboard', icon: 'üìä' },
{ name: '–ö–∞–Ω–±–∞–Ω', path: '/kanban', icon: 'üî•' },
{ name: '–õ–∏–¥—ã', path: '/leads', icon: 'üéØ' },
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –†–∞–∑–Ω—ã–µ —Ä–µ–Ω–¥–µ—Ä—ã –≤ —Ä–∞–∑–Ω—ã—Ö –û–°/–±—Ä–∞—É–∑–µ—Ä–∞—Ö
- –ü–ª–æ—Ö–æ –¥–ª—è accessibility (screen readers —á–∏—Ç–∞—é—Ç "emoji fire")
- –ù–µ—Ç hover-—ç—Ñ—Ñ–µ–∫—Ç–æ–≤

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `@heroicons/react` (—É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω):
```typescript
import { ChartBarIcon, FireIcon, TargetIcon } from '@heroicons/react/24/outline';

{ name: '–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è', path: '/dashboard', icon: ChartBarIcon },
```

---

## 7. –¢–ï–°–¢–ò–†–£–ï–ú–û–°–¢–¨

**–û—Ü–µ–Ω–∫–∞:** 2/10 ‚≠ê‚≠ê

### ‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´

#### **P0-7: –ü–æ—á—Ç–∏ –Ω–µ—Ç data-testid**
**–§–∞–∫—Ç:** `grep -r "data-testid" frontend --include="*.tsx" | wc -l` = 3

**–ù–∞–π–¥–µ–Ω—ã —Ç–æ–ª—å–∫–æ –≤:**
- `components/ai/AICopilotChat.tsx` (3 —à—Ç.)

**–ü—Ä–æ–±–ª–µ–º–∞:** Playwright —Ç–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ö—Ä—É–ø–∫–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã:
```typescript
// tests/e2e/leads.spec.ts:10
await page.click('a:has-text("Leads")'); // ‚ùå –°–ª–æ–º–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–≤–æ–¥–µ

// tests/e2e/leads.spec.ts:15
await expect(page.locator('button:has-text("New Lead")')).toBeVisible(); // ‚ùå
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å `data-testid` –≤–µ–∑–¥–µ:
```typescript
<button data-testid="new-lead-button" onClick={handleCreateNew}>
  New Lead
</button>

// –¢–µ—Å—Ç:
await page.click('[data-testid="new-lead-button"]'); // ‚úÖ
```

---

#### **P1-6: –ù–µ—Ç unit-—Ç–µ—Å—Ç–æ–≤ –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**
**–§–∞–∫—Ç:** –ù–µ—Ç `*.test.tsx` —Ñ–∞–π–ª–æ–≤ –≤ `frontend/`

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `@testing-library/react` –∏ –Ω–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è:
- UI-–ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤ (`Button`, `Input`)
- –ö—Ä–∏—Ç–∏—á–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (`LeadModal`, `ClientModal`)
- –£—Ç–∏–ª–∏—Ç (`lib/api.ts`, `lib/utils.ts`)

---

## 8. –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨

**–û—Ü–µ–Ω–∫–∞:** 6/10 ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê

### ‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–´

#### **P2-9: –ù–µ—Ç –º–µ–º–æ–∏–∑–∞—Ü–∏–∏ –≤ —Å–ø–∏—Å–∫–∞—Ö**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–æ–ª—å—à–∏–µ —Å–ø–∏—Å–∫–∏ —Ä–µ—Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é:
```typescript
// leads/page.tsx:129-163
{filteredLeads.map((lead) => (
  <div 
    key={lead.id}
    onClick={() => handleOpenLead(lead.id)} // ‚ùå –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –Ω–∞ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ
  >
    ...
  </div>
))}
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```typescript
const handleOpenLead = useCallback((leadId: string) => {
  setSelectedLeadId(leadId);
  setShowLeadModal(true);
}, []);

// –ò–ª–∏ –≤—ã–Ω–µ—Å—Ç–∏ –∫–∞—Ä—Ç–æ—á–∫—É –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç:
const LeadCard = React.memo(({ lead, onClick }: Props) => {
  ...
});
```

---

#### **P2-10: Kanban –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –±–æ–ª—å—à–∏–º–∏ —Å–ø–∏—Å–∫–∞–º–∏**
**–§–∞–π–ª:** `kanban/page.tsx`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ –≤ –ø–∞–π–ø–ª–∞–π–Ω–µ 100+ –ª–∏–¥–æ–≤, DnD –º–æ–∂–µ—Ç —Ç–æ—Ä–º–æ–∑–∏—Ç—å.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–ø–∏—Å–∫–æ–≤ (`@tanstack/react-virtual`)
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –ø–æ 50 –ª–∏–¥–æ–≤ –Ω–∞ —ç—Ç–∞–ø

---

## 9. –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨ FRONTEND

**–û—Ü–µ–Ω–∫–∞:** 7/10 ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê

### ‚úÖ –ß—Ç–æ —Ö–æ—Ä–æ—à–æ:
- –ù–µ—Ç `dangerouslySetInnerHTML`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è CSP-–±–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø–æ–¥—Ö–æ–¥
- XSS-–∑–∞—â–∏—Ç–∞ —á–µ—Ä–µ–∑ React –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### ‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–´

#### **P2-11: –¢–æ–∫–µ–Ω —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ localStorage**
**–§–∞–π–ª:** `login/page.tsx:60`
```typescript
localStorage.setItem('token', token); // ‚ö†Ô∏è –£—è–∑–≤–∏–º–æ –∫ XSS
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ï—Å–ª–∏ –µ—Å—Ç—å XSS-—É—è–∑–≤–∏–º–æ—Å—Ç—å, —Ç–æ–∫–µ–Ω –º–æ–∂–Ω–æ —É–∫—Ä–∞—Å—Ç—å
- `localStorage` –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –≤—Å–µ—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- –•—Ä–∞–Ω–∏—Ç—å —Ç–æ–∫–µ–Ω –≤ `httpOnly` cookie (—Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞ backend)
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `sessionStorage` (–æ—á–∏—â–∞–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –≤–∫–ª–∞–¥–∫–∏)

---

#### **P3-1: –ù–µ—Ç Content Security Policy**
**–§–∞–π–ª:** `next.config.js`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç CSP-–∑–∞–≥–æ–ª–æ–≤–∫–æ–≤.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å –≤ `next.config.js`:
```javascript
async headers() {
  return [
    {
      source: '/:path*',
      headers: [
        {
          key: 'Content-Security-Policy',
          value: "default-src 'self'; script-src 'self' 'unsafe-eval'; style-src 'self' 'unsafe-inline';"
        }
      ]
    }
  ];
}
```

---

## 10. –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø –ò BUILD

**–û—Ü–µ–Ω–∫–∞:** 5/10 ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê

### ‚úÖ –ß—Ç–æ —Ö–æ—Ä–æ—à–æ:
- Next.js rewrites –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- TailwindCSS –ø–æ–¥–∫–ª—é—á–µ–Ω
- TypeScript –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

### ‚ùå –ü–†–û–ë–õ–ï–ú–´ (—É–∂–µ —É–ø–æ–º—è–Ω—É—Ç—ã–µ –≤—ã—à–µ):
- `ignoreBuildErrors: true` ‚ùå
- `strict: false` ‚ùå
- –£—Å—Ç–∞—Ä–µ–≤—à–∞—è –≤–µ—Ä—Å–∏—è Next.js 14.0.4 (–≤—ã—à–ª–∞ 14.2.x)

#### **P2-12: –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ environment variables**
**–ü—Ä–æ–±–ª–µ–º–∞:** `next.config.js:16` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `process.env.API_URL`, –Ω–æ –Ω–∏–≥–¥–µ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:
```javascript
const apiUrl = process.env.API_URL || 'http://backend:5002'; // Fallback —Ö–æ—Ä–æ—à–∏–π
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é:
```javascript
const requiredEnvVars = ['API_URL'];
requiredEnvVars.forEach(envVar => {
  if (!process.env[envVar]) {
    console.warn(`Missing environment variable: ${envVar}, using default`);
  }
});
```

---

## 11. –ò–ù–¢–ï–†–ù–ê–¶–ò–û–ù–ê–õ–ò–ó–ê–¶–ò–Ø (i18n)

**–û—Ü–µ–Ω–∫–∞:** 7/10 ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê

### ‚úÖ –ß—Ç–æ —Ö–æ—Ä–æ—à–æ:
- –ï—Å—Ç—å —Å–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ `lib/translations.ts`
- –•—É–∫ `useTranslation()` —É–¥–æ–±–µ–Ω
- 160+ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π

### ‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–´

#### **P3-2: –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫**
**–§–∞–π–ª:** `lib/translations.ts:3-4`
```typescript
export const translations = {
  ru: { ... } // –¢–æ–ª—å–∫–æ —Ä—É—Å—Å–∫–∏–π
};
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ (–¥–ª—è –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤).

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```typescript
export const translations = {
  ru: { ... },
  en: {
    'Loading': 'Loading...',
    'Leads': 'Leads',
    // ...
  }
};

export function useTranslation(locale: 'ru' | 'en' = 'ru') {
  const t = (key: string) => {
    return translations[locale][key] || key;
  };
  return { t };
}
```

---

#### **P3-3: Inconsistent –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ß–∞—Å—Ç—å —Ç–µ–∫—Å—Ç–∞ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–∞, —á–∞—Å—Ç—å - –Ω–µ—Ç:
```typescript
// leads/page.tsx:96
New Lead  // ‚ùå –ù–µ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–æ

// leads/page.tsx:89
{t('Leads')} // ‚úÖ –ü–µ—Ä–µ–≤–µ–¥–µ–Ω–æ
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –í—Å–µ —Ç–µ–∫—Å—Ç—ã –æ–±–µ—Ä–Ω—É—Ç—å –≤ `t()`.

---

## üìä –î–ï–¢–ê–õ–¨–ù–ê–Ø –û–¶–ï–ù–ö–ê –ü–û –ö–†–ò–¢–ï–†–ò–Ø–ú

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –û—Ü–µ–Ω–∫–∞ | –í–µ—Å | –í–∑–≤–µ—à. |
|----------|--------|-----|--------|
| **API & –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** | 3/10 | 20% | 0.6 |
| **TypeScript & –¢–∏–ø–∏–∑–∞—Ü–∏—è** | 4/10 | 15% | 0.6 |
| **–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è** | 7/10 | 10% | 0.7 |
| **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã & –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** | 6.5/10 | 15% | 0.975 |
| **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º** | 5/10 | 10% | 0.5 |
| **UI/UX & Accessibility** | 4/10 | 15% | 0.6 |
| **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** | 2/10 | 10% | 0.2 |
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | 6/10 | 5% | 0.3 |
| **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** | 7/10 | 5% | 0.35 |
| **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** | 5/10 | 5% | 0.25 |

**–ò–¢–û–ì–û–í–ê–Ø –û–¶–ï–ù–ö–ê:** **6.2/10** ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê

---

## üéØ –ü–†–ò–û–†–ò–¢–ò–ó–ò–†–û–í–ê–ù–ù–´–ô –°–ü–ò–°–û–ö –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

### ‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï (P0) - –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ù–ï–ú–ï–î–õ–ï–ù–ù–û

1. **P0-1:** –î–æ–±–∞–≤–∏—Ç—å response interceptor –≤ `lib/api.ts` (401/403/500 handling)
2. **P0-2:** –°–æ–∑–¥–∞—Ç—å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ API
3. **P0-3:** –í–∫–ª—é—á–∏—Ç—å `"strict": true` –≤ `tsconfig.json`
4. **P0-4:** –£–¥–∞–ª–∏—Ç—å `ignoreBuildErrors: true` –∏–∑ `next.config.js`
5. **P0-5:** –î–æ–±–∞–≤–∏—Ç—å ARIA-–∞—Ç—Ä–∏–±—É—Ç—ã –≤ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –∏ –∫–Ω–æ–ø–∫–∏
6. **P0-6:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å–µ–º–∞–Ω—Ç–∏–∫—É HTML (div ‚Üí article, section)
7. **P0-7:** –î–æ–±–∞–≤–∏—Ç—å `data-testid` –≤ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã

**–ó–∞—Ç—Ä–∞—Ç—ã –≤—Ä–µ–º–µ–Ω–∏:** ~4-6 —á–∞—Å–æ–≤

---

### ‚ö†Ô∏è –í–´–°–û–ö–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢ (P1)

8. **P1-1:** –°–æ–∑–¥–∞—Ç—å SSR-–±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ö–µ–ª–ø–µ—Ä `getToken()`
9. **P1-2:** –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å API calls - —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ `api.ts`
10. **P1-3:** –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å `AppLayout` –Ω–∞ TailwindCSS
11. **P1-4:** –°–æ–∑–¥–∞—Ç—å zustand-—Å—Ç–æ—Ä –¥–ª—è auth
12. **P1-5:** –î–æ–±–∞–≤–∏—Ç—å keyboard navigation –≤ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
13. **P1-6:** –ù–∞–ø–∏—Å–∞—Ç—å unit-—Ç–µ—Å—Ç—ã –¥–ª—è UI-–ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤

**–ó–∞—Ç—Ä–∞—Ç—ã –≤—Ä–µ–º–µ–Ω–∏:** ~6-8 —á–∞—Å–æ–≤

---

### üü° –°–†–ï–î–ù–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢ (P2)

14. **P2-1:** –°–æ–∑–¥–∞—Ç—å Next.js middleware –¥–ª—è auth
15. **P2-2:** –í—ã–Ω–µ—Å—Ç–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—é –≤ –∫–æ–Ω—Ñ–∏–≥ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–æ–ª–µ–π
16. **P2-3:** –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `Providers.tsx` —Å QueryClient
17. **P2-4:** –°–æ–∑–¥–∞—Ç—å —Ö—É–∫ `useApiQuery` –∏–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å React Query
18. **P2-5:** –ù–∞—á–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å React Query
19. **P2-6:** –£–¥–∞–ª–∏—Ç—å `console.log` –∏–∑ production (—Å–æ–∑–¥–∞—Ç—å `logger.ts`)
20. **P2-7:** –î–æ–±–∞–≤–∏—Ç—å skeleton screens
21. **P2-8:** –ó–∞–º–µ–Ω–∏—Ç—å —ç–º–æ–¥–∑–∏ –Ω–∞ `@heroicons/react`
22. **P2-9:** –î–æ–±–∞–≤–∏—Ç—å –º–µ–º–æ–∏–∑–∞—Ü–∏—é –≤ —Å–ø–∏—Å–∫–∏ (`useCallback`, `React.memo`)
23. **P2-10:** –î–æ–±–∞–≤–∏—Ç—å –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—é –≤ Kanban
24. **P2-11:** –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å httpOnly cookies –≤–º–µ—Å—Ç–æ localStorage
25. **P2-12:** –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é env variables

**–ó–∞—Ç—Ä–∞—Ç—ã –≤—Ä–µ–º–µ–Ω–∏:** ~8-12 —á–∞—Å–æ–≤

---

### üîµ –ù–ò–ó–ö–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢ (P3)

26. **P3-1:** –î–æ–±–∞–≤–∏—Ç—å CSP-–∑–∞–≥–æ–ª–æ–≤–∫–∏
27. **P3-2:** –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–∞
28. **P3-3:** –û–±–µ—Ä–Ω—É—Ç—å –≤–µ—Å—å —Ç–µ–∫—Å—Ç –≤ `t()`

**–ó–∞—Ç—Ä–∞—Ç—ã –≤—Ä–µ–º–µ–Ω–∏:** ~3-4 —á–∞—Å–∞

---

## üîÑ –°–í–Ø–ó–¨ –° BACKEND –ê–£–î–ò–¢–û–ú

### –ü—Ä–æ–±–ª–µ–º—ã, —Ç—Ä–µ–±—É—é—â–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞ backend:

1. **httpOnly cookies –¥–ª—è —Ç–æ–∫–µ–Ω–æ–≤** (P2-11)
   - Backend: –í–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ç–æ–∫–µ–Ω –≤ httpOnly cookie
   - Frontend: –£–±—Ä–∞—Ç—å `localStorage.setItem('token')`

2. **–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è API responses** (P0-2)
   - Backend: –í—Å–µ –æ—Ç–≤–µ—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å `{ success, data, error }`
   - Frontend: –ï–¥–∏–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–≤–µ—Ç–æ–≤

3. **Refresh token mechanism** (–±—É–¥—É—â–µ–µ)
   - Backend: Endpoint `/auth/refresh`
   - Frontend: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π refresh –≤ interceptor

---

## üìà –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –£–õ–£–ß–®–ï–ù–ò–Æ –ê–†–•–ò–¢–ï–ö–¢–£–†–´

### 1. –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ React Query

**–î–æ:**
```typescript
const [leads, setLeads] = useState([]);
const [loading, setLoading] = useState(true);

useEffect(() => {
  fetch('/api/leads')
    .then(res => res.json())
    .then(data => setLeads(data))
    .finally(() => setLoading(false));
}, []);
```

**–ü–æ—Å–ª–µ:**
```typescript
const { data: leads, isLoading } = useQuery({
  queryKey: ['leads'],
  queryFn: () => api.get('/leads').then(res => res.data)
});
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ê–≤—Ç–æ–∫–µ—à
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π refetch
- –ù–µ—Ç useState/useEffect
- Devtools

---

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∏–ø–æ–≤ (models.ts)

**–§–∞–π–ª:** `types/models.ts`
```typescript
export interface User {
  id: string;
  email: string;
  first_name: string;
  last_name: string;
  role: 'admin' | 'manager' | 'agent';
}

export interface Lead {
  id: string;
  title: string;
  description?: string;
  value: number;
  probability: number;
  client_id?: string;
  client_name?: string;
  pipeline_id: string;
  pipeline_name?: string;
  stage_id: string;
  stage_name?: string;
  created_at: string;
  updated_at: string;
  closed_at?: string;
}

export interface Client {
  id: string;
  company_name: string;
  contact_person?: string;
  email?: string;
  phone?: string;
  city?: string;
  country?: string;
  created_at: string;
}

// API Response wrapper
export interface ApiResponse<T> {
  success: boolean;
  data?: T;
  error?: string;
}
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```typescript
const [leads, setLeads] = useState<Lead[]>([]);
const { data } = useQuery<ApiResponse<Lead[]>>(...);
```

---

### 3. –ï–¥–∏–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–§–∞–π–ª:** `lib/api-client.ts`
```typescript
import axios from 'axios';
import toast from 'react-hot-toast';
import { useRouter } from 'next/navigation';

const api = axios.create({ baseURL: '/api' });

// Request interceptor
api.interceptors.request.use((config) => {
  const token = typeof window !== 'undefined' ? localStorage.getItem('token') : null;
  if (token) config.headers.Authorization = `Bearer ${token}`;
  return config;
});

// Response interceptor
api.interceptors.response.use(
  (response) => response,
  (error) => {
    const status = error.response?.status;
    
    if (status === 401) {
      // –¢–æ–∫–µ–Ω –∏—Å—Ç–µ–∫
      localStorage.removeItem('token');
      localStorage.removeItem('user');
      window.location.href = '/login';
      toast.error('–°–µ—Å—Å–∏—è –∏—Å—Ç–µ–∫–ª–∞, –≤–æ–π–¥–∏—Ç–µ —Å–Ω–æ–≤–∞');
    } else if (status === 403) {
      toast.error('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤');
    } else if (status >= 500) {
      toast.error('–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ');
    } else {
      const message = error.response?.data?.error || '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞';
      toast.error(message);
    }
    
    return Promise.reject(error);
  }
);

export default api;
```

---

## üß™ –†–ï–ó–£–õ–¨–¢–ê–¢–´ E2E –¢–ï–°–¢–û–í (Playwright)

**–ò–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∑–∞–ø—É—Å–∫–∞:** 38/46 passing (83%)

### Failing tests (8):
- –°–µ–ª–µ–∫—Ç–æ—Ä—ã —Å–ª–æ–º–∞–Ω—ã –∏–∑-–∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ UI
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ `data-testid`
- Timeout –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è `data-testid` (P0-7) —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–π—Ç–∏.

---

## üìö –¢–ï–•–ù–û–õ–û–ì–ò–ß–ï–°–ö–ò–ô –°–¢–ï–ö

### –¢–µ–∫—É—â–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```json
{
  "next": "14.0.4",              // ‚ö†Ô∏è –£—Å—Ç–∞—Ä–µ–≤—à–∞—è (—Ç–µ–∫—É—â–∞—è 14.2.x)
  "react": "18.2.0",             // ‚úÖ
  "@tanstack/react-query": "5.15.0", // ‚úÖ –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
  "@dnd-kit/core": "6.3.1",      // ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ Kanban
  "@heroicons/react": "2.2.0",   // ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —á–∞—Å—Ç–∏—á–Ω–æ
  "axios": "1.6.0",              // ‚úÖ
  "react-hot-toast": "2.4.1",    // ‚úÖ
  "react-hook-form": "7.49.2",   // ‚ùì –ù–µ –≤–∏–¥–µ–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
  "zod": "3.22.4",               // ‚ùì –ù–µ –≤–∏–¥–µ–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
  "zustand": "4.4.7",            // ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
  "tailwindcss": "3.4.1",        // ‚úÖ
  "typescript": "5.9.3"          // ‚úÖ –ù–æ strict: false
}
```

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º:
1. ‚úÖ **–û–±–Ω–æ–≤–∏—Ç—å Next.js:** `14.0.4` ‚Üí `14.2.x` (–∏–ª–∏ `15.x` –µ—Å–ª–∏ –≥–æ—Ç–æ–≤—ã)
2. ‚úÖ **–ù–∞—á–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** `@tanstack/react-query`
3. ‚úÖ **–ù–∞—á–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** `zustand` –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å—Ç–æ—Ä–∞
4. ‚ùì **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** `react-hook-form` –∏ `zod` - –µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è, —É–¥–∞–ª–∏—Ç—å
5. ‚ûï **–î–æ–±–∞–≤–∏—Ç—å:** `@headlessui/react` –¥–ª—è accessible –º–æ–¥–∞–ª–æ–∫
6. ‚ûï **–î–æ–±–∞–≤–∏—Ç—å:** `@testing-library/react` –¥–ª—è unit-—Ç–µ—Å—Ç–æ–≤

---

## üéì –í–´–í–û–î–´ –ò –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### –û–±—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
Frontend –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ **—Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏**, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç —Å–µ—Ä—å–µ–∑–Ω—ã—Ö —É–ª—É—á—à–µ–Ω–∏–π –≤ –ø–ª–∞–Ω–µ:
- –û–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
- –¢–∏–ø–∏–∑–∞—Ü–∏–∏
- –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
- –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç–∏

### –ß—Ç–æ –¥–µ–ª–∞—Ç—å –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å:
1. **–ù–µ–¥–µ–ª—è 1:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å P0 (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã)
   - Response interceptor
   - TypeScript strict mode
   - –ë–∞–∑–æ–≤—ã–µ ARIA-–∞—Ç—Ä–∏–±—É—Ç—ã
   
2. **–ù–µ–¥–µ–ª—è 2:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å P1 (–≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
   - Auth store (zustand)
   - –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è API calls
   - Keyboard navigation

3. **–ù–µ–¥–µ–ª—è 3:** –ù–∞—á–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å React Query
   - –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å 3-4 —Å—Ç—Ä–∞–Ω–∏—Ü—ã
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å QueryClient
   - –û–±—É—á–∏—Ç—å –∫–æ–º–∞–Ω–¥—É

4. **–ù–µ–¥–µ–ª—è 4+:** P2 –∏ P3 –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è:
- –°–æ–∑–¥–∞—Ç—å Design System (UI Kit) —Å storybook
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤
- –í–Ω–µ–¥—Ä–∏—Ç—å code review —Å —á–µ–∫–ª–∏—Å—Ç–æ–º
- –î–æ–±–∞–≤–∏—Ç—å Lighthouse CI –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è performance
- –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –Ω–∞ TypeScript strict mode –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ

---

## üìù –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

Frontend PBK CRM –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è—Ö (Next.js 14, React 18, TailwindCSS), –Ω–æ —Å—Ç—Ä–∞–¥–∞–µ—Ç –æ—Ç:
- **–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫** (–∫—Ä–∏—Ç–∏—á–Ω–æ)
- **–°–ª–∞–±–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–∏** (–∫—Ä–∏—Ç–∏—á–Ω–æ)
- **–û—Ç—Å—É—Ç—Å—Ç–≤–∏—è accessibility** (–∫—Ä–∏—Ç–∏—á–Ω–æ)
- **–ù–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫** (React Query, zustand)

**–û—Ü–µ–Ω–∫–∞: 6.2/10** - —Ç—Ä–µ–±—É–µ—Ç —É–ª—É—á—à–µ–Ω–∏–π, –Ω–æ –∏–º–µ–µ—Ç —Ö–æ—Ä–æ—à–∏–π —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç.

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º (P0+P1) –æ—Ü–µ–Ω–∫–∞ –º–æ–∂–µ—Ç –ø–æ–¥–Ω—è—Ç—å—Å—è –¥–æ **8-8.5/10**.

---

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ê—É–¥–∏—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã (Docker, Nginx, PostgreSQL)

---

_–ö–æ–Ω–µ—Ü –æ—Ç—á–µ—Ç–∞ –ø–æ Frontend_
