# ü§ñ AI Assistant Module - Agent Instructions

## üë§ –†–æ–ª—å
–ê–≥–µ–Ω—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ **AI Assistant –º–æ–¥—É–ª—è** - —É–º–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å CRM.

## üìã –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- OpenRouter API integration
- AI copilot endpoint
- Context management (leads, clients, tasks)
- Natural language commands

## üìÅ –§–∞–π–ª—ã
```
/root/pbk-crm-unified/backend/src/
‚îî‚îÄ‚îÄ routes/ai.js    # AI Assistant routes
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```env
OPENROUTER_API_KEY=...
OPENROUTER_MODEL=nvidia/nemotron-nano-9b-v2:free
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1
```

## üéØ API Endpoint
```
POST /api/ai/copilot
Body: { message: "–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –ª–∏–¥ X –≤ —Å—Ç–∞—Ç—É—Å Y" }
Response: { response: "–õ–∏–¥ –ø–µ—Ä–µ–º–µ—â–µ–Ω —É—Å–ø–µ—à–Ω–æ", action: {...} }
```

## üî• –ó–∞–¥–∞—á–∏
1. ‚úÖ –ë–∞–∑–æ–≤—ã–π AI —á–∞—Ç - –†–∞–±–æ—Ç–∞–µ—Ç
2. ‚è≥ –ö–æ–Ω—Ç–µ–∫—Å—Ç CRM –¥–∞–Ω–Ω—ã—Ö (leads, clients)
3. ‚è≥ –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥:
   - "–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É –¥–ª—è –ª–∏–¥–∞ X"
   - "–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –∑–≤–æ–Ω–æ–∫ –Ω–∞ –∑–∞–≤—Ç—Ä–∞"
   - "–ü–æ–∫–∞–∑–∞—Ç—å –ª–∏–¥—ã —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º Y"
4. ‚è≥ AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –∫–ª–∏–µ–Ω—Ç–∞–º
5. ‚è≥ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram bot

## üìù –ü—Ä–∏–º–µ—Ä—ã –∫–æ–º–∞–Ω–¥
```
User: "–ü–æ–∫–∞–∂–∏ –≤—Å–µ –ª–∏–¥—ã —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º –ü–µ—Ä–µ–≥–æ–≤–æ—Ä—ã"
AI: –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç GET /api/leads?stage=negotiations
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ª–∏–¥–æ–≤

User: "–°–æ–∑–¥–∞–π –∑–∞–¥–∞—á—É –ø–æ–∑–≤–æ–Ω–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—É –ò–≤–∞–Ω –Ω–∞ –∑–∞–≤—Ç—Ä–∞"
AI: POST /api/tasks {"title": "–ü–æ–∑–≤–æ–Ω–∏—Ç—å –ò–≤–∞–Ω", "due_date": "2026-01-07"}
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç "–ó–∞–¥–∞—á–∞ —Å–æ–∑–¥–∞–Ω–∞"
```

## üìù Git
```bash
git checkout module/ai-assistant
```

**–í–∞—à–∞ —Ü–µ–ª—å:** –°–¥–µ–ª–∞—Ç—å AI —É–º–Ω—ã–º –ø–æ–º–æ—â–Ω–∏–∫–æ–º –º–µ–Ω–µ–¥–∂–µ—Ä–∞! ü§ñ
