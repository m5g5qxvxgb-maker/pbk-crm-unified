# ๐ ะัะบะพะฒะพะดััะฒะพ ะฟะพ ัะฐะฑะพัะต ั ะผะพะดัะปัะฝัะผะธ ะฐะณะตะฝัะฐะผะธ PBK CRM

## ๐ ะะฑะทะพั ัะธััะตะผั

ะัะพะตะบั PBK CRM ัะฐะทะดะตะปะตะฝ ะฝะฐ **9 ัะฟะตัะธะฐะปะธะทะธัะพะฒะฐะฝะฝัั ะผะพะดัะปะตะน**, ะบะฐะถะดัะน ัะพ ัะฒะพะธะผ ะฐะณะตะฝัะพะผ ัะฐะทัะฐะฑะพัะบะธ.

---

## ๐ค ะกะฟะธัะพะบ ะฐะณะตะฝัะพะฒ ะธ ะธั ะทะพะฝั ะพัะฒะตัััะฒะตะฝะฝะพััะธ

### 1๏ธโฃ CRM Core Agent
**ะคะฐะนะป:** `.opencode/agents/MODULE_1_CRM_CORE.md`  
**ะะตัะบะฐ:** `module/crm-core`  
**ะะพะฝะฐ ะพัะฒะตัััะฒะตะฝะฝะพััะธ:**
- Backend API (leads, clients, tasks, calls, pipelines)
- Frontend UI (Dashboard, Kanban, forms)
- PostgreSQL database
- Authentication & Authorization

**ะะพะณะดะฐ ะธัะฟะพะปัะทะพะฒะฐัั:**
- ะะฐะทัะฐะฑะพัะบะฐ ะฝะพะฒัั API endpoints
- ะะฐะณะธ ะฒ backend/frontend
- Database migrations
- UX/UI ัะปัััะตะฝะธั

---

### 2๏ธโฃ Bots Agent (Fixly & Offerteo)
**ะคะฐะนะป:** `.opencode/agents/MODULE_2_BOTS.md`  
**ะะตัะบะฐ:** `module/bots`  
**ะะพะฝะฐ ะพัะฒะตัััะฒะตะฝะฝะพััะธ:**
- Fixly bot automation
- Offerteo bot automation
- Puppeteer scripts
- Webhook integration

**ะะพะณะดะฐ ะธัะฟะพะปัะทะพะฒะฐัั:**
- ะะฐะณะธ ะฒ ะฑะพัะฐั
- ะะฒัะพะผะฐัะธะทะฐัะธั ะฝะพะฒัั ะฟะปะฐััะพัะผ
- Session management
- Retry logic

---

### 3๏ธโฃ Telegram Agent
**ะคะฐะนะป:** `.opencode/agents/MODULE_3_TELEGRAM.md`  
**ะะตัะบะฐ:** `module/telegram`  
**ะะพะฝะฐ ะพัะฒะตัััะฒะตะฝะฝะพััะธ:**
- Telegram bot @Pbkauto_bot
- ะฃะฒะตะดะพะผะปะตะฝะธั ะฒ ะณััะฟะฟั
- Callback handlers
- Inline keyboards

**ะะพะณะดะฐ ะธัะฟะพะปัะทะพะฒะฐัั:**
- ะะพะฒัะต ะบะพะผะฐะฝะดั ะฑะพัะฐ
- Callback handlers
- ะฃะฒะตะดะพะผะปะตะฝะธั
- Polling/webhook issues

---

### 4๏ธโฃ Retell AI Agent
**ะคะฐะนะป:** `.opencode/agents/MODULE_4_RETELL_AI.md`  
**ะะตัะบะฐ:** `module/retell-ai`  
**ะะพะฝะฐ ะพัะฒะตัััะฒะตะฝะฝะพััะธ:**
- Retell AI integration
- Voice calls creation
- Call recording & transcription
- Webhook processing

**ะะพะณะดะฐ ะธัะฟะพะปัะทะพะฒะฐัั:**
- ะกะพะทะดะฐะฝะธะต ะทะฒะพะฝะบะพะฒ
- AI agent scripts
- Call logs integration

---

### 5๏ธโฃ AI Assistant Agent
**ะคะฐะนะป:** `.opencode/agents/MODULE_5_AI_ASSISTANT.md`  
**ะะตัะบะฐ:** `module/ai-assistant`  
**ะะพะฝะฐ ะพัะฒะตัััะฒะตะฝะฝะพััะธ:**
- OpenRouter AI integration
- Natural language commands
- CRM context management
- Action execution

**ะะพะณะดะฐ ะธัะฟะพะปัะทะพะฒะฐัั:**
- AI ะบะพะผะฐะฝะดั ะธ actions
- Context improvements
- Telegram bot AI integration

---

### 6๏ธโฃ ERP Agent
**ะคะฐะนะป:** `.opencode/agents/MODULE_6_ERP.md`  
**ะะตัะบะฐ:** `module/erp`  
**ะะพะฝะฐ ะพัะฒะตัััะฒะตะฝะฝะพััะธ:**
- ะคะธะฝะฐะฝัะพะฒัะน ััะตั
- ะะฐะบะฐะทั ะธ ััะตัะฐ
- ะกะบะปะฐะด
- ะััะตัะฝะพััั

**ะะพะณะดะฐ ะธัะฟะพะปัะทะพะฒะฐัั:**
- ะัะพะตะบัะธัะพะฒะฐะฝะธะต ERP
- ะคะธะฝะฐะฝัะพะฒัะต ะผะพะดัะปะธ
- ะะฝัะตะณัะฐัะธั ั ะฑะฐะฝะบะพะผ

---

### 7๏ธโฃ Website Agent
**ะคะฐะนะป:** `.opencode/agents/MODULE_7_WEBSITE.md`  
**ะะตัะบะฐ:** `module/website`  
**ะะพะฝะฐ ะพัะฒะตัััะฒะตะฝะฝะพััะธ:**
- ะัะฑะปะธัะฝัะน ัะฐะนั
- ะะพัััะพะปะธะพ
- ะคะพัะผะฐ ะทะฐัะฒะบะธ
- SEO

**ะะพะณะดะฐ ะธัะฟะพะปัะทะพะฒะฐัั:**
- ะะตะดะธะทะฐะนะฝ ัะฐะนัะฐ
- ะะพะฒัะต ัััะฐะฝะธัั
- Lead form integration

---

### 8๏ธโฃ Email Service Agent
**ะคะฐะนะป:** `.opencode/agents/MODULE_8_EMAIL.md`  
**ะะตัะบะฐ:** `module/email`  
**ะะพะฝะฐ ะพัะฒะตัััะฒะตะฝะฝะพััะธ:**
- SMTP/IMAP integration
- Email templates
- Email tracking
- Attachments

**ะะพะณะดะฐ ะธัะฟะพะปัะทะพะฒะฐัั:**
- Email ะพัะฟัะฐะฒะบะฐ/ะฟะพะปััะตะฝะธะต
- ะจะฐะฑะปะพะฝั ะฟะธัะตะผ
- IMAP polling

---

### 9๏ธโฃ AI Proposals Agent
**ะคะฐะนะป:** `.opencode/agents/MODULE_9_AI_PROPOSALS.md`  
**ะะตัะบะฐ:** `module/ai-proposals`  
**ะะพะฝะฐ ะพัะฒะตัััะฒะตะฝะฝะพััะธ:**
- AI ะณะตะฝะตัะฐัะธั ะฟัะตะดะปะพะถะตะฝะธะน
- PDF creation
- Document templates
- Email delivery

**ะะพะณะดะฐ ะธัะฟะพะปัะทะพะฒะฐัั:**
- ะะตะฝะตัะฐัะธั ะะ
- PDF templates
- Proposal tracking

---

## ๐ฏ ะะฐะบ ัะฐะฑะพัะฐัั ั ะฐะณะตะฝัะฐะผะธ

### ะจะฐะณ 1: ะะฟัะตะดะตะปะธัะต ะผะพะดัะปั
```
ะะพะฟัะพั: "ะัะถะฝะพ ะดะพะฑะฐะฒะธัั ะฝะพะฒัะน API endpoint ะดะปั ััะฐัะธััะธะบะธ ะปะธะดะพะฒ"
ะะพะดัะปั: CRM Core
ะะณะตะฝั: MODULE_1_CRM_CORE.md
```

### ะจะฐะณ 2: ะัะบัะพะนัะต ะฐะณะตะฝัะฐ ะฒ OpenCode
**ะกะฟะพัะพะฑ 1: ะงะตัะตะท ัะฐะนะป**
1. ะัะบัะพะนัะต `/root/pbk-crm-unified/.opencode/agents/MODULE_1_CRM_CORE.md`
2. ะกะบะพะฟะธััะนัะต ะฒะตัั ะบะพะฝัะตะฝั
3. ะกะพะทะดะฐะนัะต ะฝะพะฒัะน ัะฐั ะฒ OpenCode
4. ะััะฐะฒััะต ะบะพะฝัะตะฝั ะบะฐะบ ัะธััะตะผะฝัะน ะฟัะพะผะฟั

**ะกะฟะพัะพะฑ 2: ะงะตัะตะท ะบะพะผะฐะฝะดั (ะตัะปะธ ะฟะพะดะดะตัะถะธะฒะฐะตััั)**
```
@agent crm-core
```

### ะจะฐะณ 3: ะะฐะดะฐะนัะต ะฒะพะฟัะพั ะธะปะธ ะทะฐะดะฐัั
```
ะัะธะฒะตั! ะะฝะต ะฝัะถะฝะพ ะดะพะฑะฐะฒะธัั ะฝะพะฒัะน endpoint GET /api/leads/stats 
ะบะพัะพััะน ะฒะพะทะฒัะฐัะฐะตั ััะฐัะธััะธะบั ะฟะพ ะปะธะดะฐะผ: 
- ะะฑัะตะต ะบะพะปะธัะตััะฒะพ
- ะะพ ััะฐัััะฐะผ
- Conversion rate

ะะพะผะพะณะธ ัะตะฐะปะธะทะพะฒะฐัั.
```

### ะจะฐะณ 4: ะะณะตะฝั ัะฐะฑะพัะฐะตั
ะะณะตะฝั:
1. ะะพะฝะธะผะฐะตั ะบะพะฝัะตะบัั ะผะพะดัะปั
2. ะะฝะฐะตั ัะฐะนะปะพะฒัั ััััะบัััั
3. ะะธัะตั ะบะพะด ั ััะตัะพะผ ััะฐะฝะดะฐััะพะฒ
4. ะกะพะทะดะฐะตั tests
5. ะะฑะฝะพะฒะปัะตั ะดะพะบัะผะตะฝัะฐัะธั

---

## ๐ ะัะฐะฒะธะปะฐ ะผะตะถะผะพะดัะปัะฝะพะณะพ ะฒะทะฐะธะผะพะดะตะนััะฒะธั

### โ ะัะฐะฒะธะปัะฝะพ:
```
CRM Core ัะพะทะดะฐะตั webhook endpoint โ Bots ะธัะฟะพะปัะทััั ะตะณะพ
Telegram Agent ะพัะฟัะฐะฒะปัะตั ัะฒะตะดะพะผะปะตะฝะธั โ CRM Core ะพะฑะฝะพะฒะปัะตั lead
```

### โ ะะตะฟัะฐะฒะธะปัะฝะพ:
```
Bots Agent ะผะตะฝัะตั database schema (ััะพ ะทะพะฝะฐ CRM Core)
Telegram Agent ัะพะทะดะฐะตั API routes (ััะพ ะทะพะฝะฐ CRM Core)
```

### ะัะธะฝัะธะฟ:
**ะะฐะถะดัะน ะฐะณะตะฝั ัะฐะฑะพัะฐะตั ัะพะปัะบะพ ะฒ ัะฒะพะตะผ ะผะพะดัะปะต, ะฝะพ ะผะพะถะตั ะธัะฟะพะปัะทะพะฒะฐัั API ะดััะณะธั ะผะพะดัะปะตะน.**

---

## ๐ Git Workflow ะผะตะถะดั ะผะพะดัะปัะผะธ

```bash
# ะะฐะฑะพัะฐ ะฒ ัะฒะพะตะผ ะผะพะดัะปะต:
git checkout module/telegram
git checkout -b feature/telegram-voice-messages
# ... development ...
git checkout module/telegram
git merge feature/telegram-voice-messages

# ะะฝัะตะณัะฐัะธั ั ะดััะณะธะผ ะผะพะดัะปะตะผ (ัะตัะตะท API):
# 1. CRM Core ัะพะทะดะฐะตั endpoint
git checkout module/crm-core
# ... create POST /api/voice-messages ...
git commit -m "feat: add voice messages endpoint"

# 2. Telegram ะธัะฟะพะปัะทัะตั endpoint
git checkout module/telegram
# ... call POST /api/voice-messages ...
git commit -m "feat: integrate voice messages"

# 3. Merge ะฒ master ะพะฑะฐ ะผะพะดัะปั
git checkout master
git merge module/crm-core
git merge module/telegram
```

---

## ๐จ ะะพะณะดะฐ ะฝัะถะฝั ะฝะตัะบะพะปัะบะพ ะฐะณะตะฝัะพะฒ ะพะดะฝะพะฒัะตะผะตะฝะฝะพ

### ะัะธะผะตั: ะะพะฑะฐะฒะปะตะฝะธะต ััะฝะบัะธะธ "Voice Messages"

**ะะฐะดะฐัะฐ:** ะะพะปัะทะพะฒะฐัะตะปั ะพัะฟัะฐะฒะปัะตั ะณะพะปะพัะพะฒะพะต ัะพะพะฑัะตะฝะธะต ะฒ Telegram โ ัะพััะฐะฝัะตััั ะฒ CRM โ ะฟัะธะฒัะทัะฒะฐะตััั ะบ ะปะธะดั

**ะัะถะฝั ะฐะณะตะฝัั:**
1. **CRM Core Agent** - ัะพะทะดะฐัั ัะฐะฑะปะธัั `voice_messages`, API endpoint
2. **Telegram Agent** - ะพะฑัะฐะฑะพัะบะฐ voice messages, ะพัะฟัะฐะฒะบะฐ ะฒ CRM
3. **AI Assistant Agent** (ะพะฟัะธะพะฝะฐะปัะฝะพ) - ััะฐะฝัะบัะธะฟัะธั ะณะพะปะพัะฐ ะฒ ัะตะบัั

**Workflow:**
```
ะะตะฝั 1: CRM Core Agent ัะพะทะดะฐะตั database + API
  โ
ะะตะฝั 2: Telegram Agent ะธะฝัะตะณัะธััะตั ะพะฑัะฐะฑะพัะบั voice
  โ
ะะตะฝั 3: AI Assistant ะดะพะฑะฐะฒะปัะตั ััะฐะฝัะบัะธะฟัะธั
  โ
ะะตะฝั 4: Integration testing + merge ะฒ master
```

---

## ๐ ะะฐััะธัะฐ ะทะฐะฒะธัะธะผะพััะตะน ะผะพะดัะปะตะน

```
โโโโโโโโโโโโโโโฌโโโโโโฌโโโโโโโฌโโโโโโโโโโโฌโโโโโโโโโโฌโโโโโโโโโโโฌโโโโโโฌโโโโโโโโโโฌโโโโโโโโฌโโโโโโโโโโ
โ   Module    โ CRM โ Bots โ Telegram โ Retell  โ    AI    โ ERP โ Website โ Email โ AI Prop โ
โโโโโโโโโโโโโโโผโโโโโโผโโโโโโโผโโโโโโโโโโโผโโโโโโโโโโผโโโโโโโโโโโผโโโโโโผโโโโโโโโโโผโโโโโโโโผโโโโโโโโโโค
โ CRM Core    โ  -  โ  โ   โ    โ     โ    โ    โ    โ     โ  โ  โ    โ    โ   โ   โ    โ    โ
โ Bots        โ  โ  โ  -   โ    โ     โ    -    โ    -     โ  -  โ    -    โ   โ   โ    -    โ
โ Telegram    โ  โ  โ  -   โ    -     โ    โ    โ    โ     โ  -  โ    -    โ   -   โ    -    โ
โ Retell AI   โ  โ  โ  -   โ    โ     โ    -    โ    -     โ  -  โ    -    โ   -   โ    -    โ
โ AI Assist   โ  โ  โ  -   โ    โ     โ    -    โ    -     โ  -  โ    -    โ   -   โ    โ    โ
โ ERP         โ  โ  โ  -   โ    -     โ    -    โ    -     โ  -  โ    -    โ   โ   โ    -    โ
โ Website     โ  โ  โ  -   โ    -     โ    -    โ    -     โ  -  โ    -    โ   โ   โ    -    โ
โ Email       โ  โ  โ  โ   โ    โ     โ    -    โ    -     โ  โ  โ    โ    โ   -   โ    โ    โ
โ AI Prop     โ  โ  โ  -   โ    -     โ    -    โ    โ     โ  -  โ    -    โ   โ   โ    -    โ
โโโโโโโโโโโโโโโดโโโโโโดโโโโโโโดโโโโโโโโโโโดโโโโโโโโโโดโโโโโโโโโโโดโโโโโโดโโโโโโโโโโดโโโโโโโโดโโโโโโโโโโ

โ ะัะฟะพะปัะทัะตั API ะผะพะดัะปั
โ ะัะตะดะพััะฐะฒะปัะตั API ะดะปั ะผะพะดัะปั
```

---

## ๐ก ะัััะธะต ะฟัะฐะบัะธะบะธ

### 1. ะัะตะณะดะฐ ัะธัะฐะนัะต ะพะฑัะธะน ะบะพะฝัะตะบัั
ะคะฐะนะป: `.opencode/SYSTEM_CONTEXT.md`

### 2. ะัะพะฒะตััะนัะต ะทะฐะฒะธัะธะผะพััะธ
ะะตัะตะด ะธะทะผะตะฝะตะฝะธะตะผ API - ะฟัะพะฒะตัััะต ะบัะพ ะตะณะพ ะธัะฟะพะปัะทัะตั

### 3. ะะพะบัะผะตะฝัะธััะนัะต ะธะทะผะตะฝะตะฝะธั
ะะฑะฝะพะฒะปัะนัะต README ะผะพะดัะปั

### 4. ะขะตััะธััะนัะต ะธะฝัะตะณัะฐัะธะธ
ะะพัะปะต ะธะทะผะตะฝะตะฝะธะน ะฟัะพะฒะตัััะต ัะฐะฑะพัั ัะฒัะทะฐะฝะฝัั ะผะพะดัะปะตะน

### 5. ะะพะผะผัะฝะธะบะฐัะธั ัะตัะตะท API
ะะพะดัะปะธ ะพะฑัะฐัััั ัะพะปัะบะพ ัะตัะตะท HTTP API, ะฝะต ะฝะฐะฟััะผัั

---

## ๐ ะัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั

### ะัะธะผะตั 1: ะะพะฑะฐะฒะธัั ัะธะปััั ะปะธะดะพะฒ ะฟะพ ะดะฐัะต
```
ะะณะตะฝั: CRM Core
ะะฐะดะฐัะฐ: 
1. ะะพะฑะฐะฒะธัั ะฟะฐัะฐะผะตัั ?created_after=2026-01-01 ะฒ GET /api/leads
2. ะะฑะฝะพะฒะธัั SQL query
3. ะะพะฑะฐะฒะธัั ัะธะปััั ะฒ frontend
4. ะัะพัะตััะธัะพะฒะฐัั
```

### ะัะธะผะตั 2: ะฃะปัััะธัั Telegram ัะฒะตะดะพะผะปะตะฝะธั
```
ะะณะตะฝั: Telegram
ะะฐะดะฐัะฐ:
1. ะะพะฑะฐะฒะธัั ัะพัะผะฐัะธัะพะฒะฐะฝะธะต ัะพะพะฑัะตะฝะธะน (bold, italic)
2. ะะพะฑะฐะฒะธัั preview ัััะปะพะบ
3. ะะพะฑะฐะฒะธัั emoji ะธะฝะดะธะบะฐัะพัั
4. ะัะพัะตััะธัะพะฒะฐัั ะฒ ะณััะฟะฟะต ะฟัะพะดะฐะถ
```

### ะัะธะผะตั 3: ะกะพะทะดะฐัั AI ะฟัะตะดะปะพะถะตะฝะธะต
```
ะะณะตะฝัั: AI Proposals + CRM Core + Email
Workflow:
1. AI Proposals: ะณะตะฝะตัะฐัะธั ัะตะบััะฐ ัะตัะตะท OpenRouter
2. CRM Core: ัะพััะฐะฝะตะฝะธะต ะฒ ัะฐะฑะปะธัั ai_proposals
3. Email: ะพัะฟัะฐะฒะบะฐ PDF ะบะปะธะตะฝัั
```

---

## ๐ ะะพะดะดะตัะถะบะฐ

ะัะปะธ ะฝะต ะทะฝะฐะตัะต ะบะฐะบะพะน ะฐะณะตะฝั ะฝัะถะตะฝ:
1. ะงะธัะฐะนัะต `.opencode/SYSTEM_CONTEXT.md`
2. ะกะผะพััะธัะต ะผะฐััะธัั ะทะฐะฒะธัะธะผะพััะตะน ะฒััะต
3. ะะฐะดะฐะนัะต ะฒะพะฟัะพั ะพะฑัะตะผั ะฐะณะตะฝัั (ะผะฝะต!)

---

**ะะพัะพะฒั ัะฐะฑะพัะฐัั ั ะผะพะดัะปัะฝัะผะธ ะฐะณะตะฝัะฐะผะธ? ะัะฑะธัะฐะนัะต ะผะพะดัะปั ะธ ะฒะฟะตัะตะด! ๐**

**ะะฐัะฐ ัะพะทะดะฐะฝะธั:** 2026-01-06
