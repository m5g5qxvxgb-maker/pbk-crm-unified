# üîë –£—Å—Ç–∞–Ω–æ–≤–∫–∞ OpenAI API –∫–ª—é—á–∞

## –£ –≤–∞—Å —É–∂–µ –µ—Å—Ç—å –∫–ª—é—á?

–ï—Å–ª–∏ –≤—ã —É–∂–µ –ø–æ–ª—É—á–∏–ª–∏ OpenAI API –∫–ª—é—á, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–¥–∏–Ω –∏–∑ —Å–ø–æ—Å–æ–±–æ–≤ –Ω–∏–∂–µ.

## –°–ø–æ—Å–æ–± 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
cd /root/pbk-crm-unified
./scripts/setup-openai-key.sh
```

–°–∫—Ä–∏–ø—Ç –ø–æ–ø—Ä–æ—Å–∏—Ç –≤–≤–µ—Å—Ç–∏ –∫–ª—é—á –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –°–æ–∑–¥–∞—Å—Ç backup —Ç–µ–∫—É—â–µ–≥–æ .env
- –û–±–Ω–æ–≤–∏—Ç OPENAI_API_KEY
- –ü—Ä–æ–≤–µ—Ä–∏—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- –ü–æ–∫–∞–∂–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

–ò–ª–∏ –ø–µ—Ä–µ–¥–∞–π—Ç–µ –∫–ª—é—á –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç:

```bash
./scripts/setup-openai-key.sh sk-–≤–∞—à-–∫–ª—é—á-–∑–¥–µ—Å—å
```

## –°–ø–æ—Å–æ–± 2: –†—É—á–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ .env
nano /root/pbk-crm-unified/.env

# –ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É
OPENAI_API_KEY=sk-placeholder

# –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à –∫–ª—é—á
OPENAI_API_KEY=sk-proj-xxx...xxx

# –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ (Ctrl+X, Y, Enter)
```

## –°–ø–æ—Å–æ–± 3: –ö–æ–º–∞–Ω–¥–∞ sed

```bash
cd /root/pbk-crm-unified

# –ó–∞–º–µ–Ω–∏—Ç–µ YOUR_KEY –Ω–∞ –≤–∞—à –Ω–∞—Å—Ç–æ—è—â–∏–π –∫–ª—é—á
sed -i 's/OPENAI_API_KEY=.*/OPENAI_API_KEY=sk-–≤–∞—à-–∫–ª—é—á/' .env
```

## –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫–ª—é—á–∞

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

```bash
cd /root/pbk-crm-unified/backend
node tests/check-ai-status.js
```

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
```
‚úÖ OpenAI Configuration:
   ‚úÖ API Key: sk-proj-...
   ‚úÖ Model: gpt-4-turbo-preview
   ‚úÖ Status: Configured (PRIMARY)
```

### 2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é

```bash
node tests/test-ai-integration.js
```

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
```
‚úÖ OpenAI: OK
   Response: "OpenAI works!"
   Tokens used: 12
```

### 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend

```bash
# –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
pm2 restart pbk-backend

# –ò–ª–∏ –µ—Å–ª–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ –≤—Ä—É—á–Ω—É—é
cd /root/pbk-crm-unified/backend
npm restart
```

## –ì–¥–µ –≤–∑—è—Ç—å –∫–ª—é—á, –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç?

1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ https://platform.openai.com/api-keys
2. –í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç (–∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π)
3. –ù–∞–∂–º–∏—Ç–µ "Create new secret key"
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á (–æ–Ω –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑!)
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ –≤ –Ω–∞–¥–µ–∂–Ω–æ–º –º–µ—Å—Ç–µ

## –í–∞–∂–Ω–æ!

‚ö†Ô∏è **–ö–ª—é—á –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑!** –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è.

‚ö†Ô∏è **–ù—É–∂–Ω—ã —Å—Ä–µ–¥—Å—Ç–≤–∞ –Ω–∞ –±–∞–ª–∞–Ω—Å–µ**: –ü–æ–ø–æ–ª–Ω–∏—Ç–µ —Å—á–µ—Ç –Ω–∞ $5-10 –¥–ª—è –Ω–∞—á–∞–ª–∞
- https://platform.openai.com/account/billing

‚ö†Ô∏è **–ù–µ –ø—É–±–ª–∏–∫—É–π—Ç–µ –∫–ª—é—á**: –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `.env` –≤ git!

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–ª—é—á–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–ª–∞–Ω—Å:
- https://platform.openai.com/account/usage
- https://platform.openai.com/account/billing

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚úÖ `.env` —É–∂–µ –≤ `.gitignore`  
‚úÖ Backup —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏  
‚úÖ –ö–ª—é—á –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ –ª–æ–≥–∞—Ö  

## –ü–æ–º–æ—â—å

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –∫–ª—é—á–∞ (–¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `sk-`)
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –µ—Å—Ç—å —Å—Ä–µ–¥—Å—Ç–≤–∞ –Ω–∞ –±–∞–ª–∞–Ω—Å–µ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∫–ª—é—á –∞–∫—Ç–∏–≤–µ–Ω –∏ –Ω–µ —É–¥–∞–ª–µ–Ω
4. –°–º. `backend/docs/OPENAI_SETUP.md` - —Ä–∞–∑–¥–µ–ª Troubleshooting
