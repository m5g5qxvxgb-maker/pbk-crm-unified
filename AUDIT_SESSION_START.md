# –ù–ê–ß–ê–õ–û –°–ï–°–°–ò–ò –ê–£–î–ò–¢–ê –ò –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô PBK CRM

‚è∞ **–í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞:** 2026-01-05 17:35:58 UTC+3
üìÅ **–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –±—ç–∫–∞–ø–∞:** /root/backups/pbk-crm-backup-2026-01-05-17-35-58
üë§ **–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:** OpenCode AI
üìã **–ü–ª–∞–Ω:** 6 —Ñ–∞–∑ (14-18 —á–∞—Å–æ–≤)
üì± **Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:** @yostrov (Chat ID: 443876287)

---

## üéØ –ü–ê–†–ê–ú–ï–¢–†–´ –°–ï–°–°–ò–ò

- **Chat ID –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:** 443876287
- **Telegram –±–æ—Ç:** @TerminalWorkspaceAssistant_BOT
- **–Ø–∑—ã–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:** –†—É—Å—Å–∫–∏–π
- **–ì—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç—ã:** –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è —Å–µ—Å—Å–∏—è
- **Downtime:** –†–∞–∑—Ä–µ—à–µ–Ω –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- **Git —Å—Ç—Ä–∞—Ç–µ–≥–∏—è:** –†–∞–±–æ—Ç–∞ –≤ master branch
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–∞—á–µ—Å—Ç–≤–æ –Ω–∞–¥ —Å–∫–æ—Ä–æ—Å—Ç—å—é

---

## üìä –¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï –°–ò–°–¢–ï–ú–´

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–¢–µ—Å—Ç—ã Playwright:** 38/46 –ø—Ä–æ–π–¥–µ–Ω–æ (83%)
- **–ü–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞–ø—É—Å–∫:** 2026-01-05 10:27
- **HTML –æ—Ç—á–µ—Ç:** `/root/pbk-crm-unified/playwright-report/index.html`

### Backend
- **–°—Ç–∞—Ç—É—Å:** –†–∞–±–æ—Ç–∞–µ—Ç
- **–ü–æ—Ä—Ç:** 5002
- **–ü—Ä–æ—Ü–µ—Å—Å:** Docker (pbk-backend) + PM2 (pbk-crm-backend)
- **–≠–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤:** 19
- **Uptime:** 23+ —á–∞—Å–æ–≤

### Frontend
- **–°—Ç–∞—Ç—É—Å:** –†–∞–±–æ—Ç–∞–µ—Ç
- **–ü–æ—Ä—Ç:** 3010
- **–ü—Ä–æ—Ü–µ—Å—Å:** Docker (pbk-frontend)
- **Framework:** Next.js 14
- **Uptime:** 6+ —á–∞—Å–æ–≤

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **–°–£–ë–î:** PostgreSQL 17.7
- **–•–æ—Å—Ç:** localhost (127.0.0.1:5432)
- **–ë–∞–∑–∞:** pbk_crm
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** pbk_admin
- **–¢–∞–±–ª–∏—Ü:** 20
- **–†–∞–∑–º–µ—Ä –¥–∞–º–ø–∞:** 54KB

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- **Public URL:** https://appp2p-01.tail96f20b.ts.net
- **Nginx:** Reverse proxy –Ω–∞ –ø–æ—Ä—Ç—É 8081
- **Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:** 3 (backend, frontend, telegram)
- **PM2 –ø—Ä–æ—Ü–µ—Å—Å—ã:** 4 (2 errored - frontend)

---

## üéØ –¶–ï–õ–ò –ê–£–î–ò–¢–ê

1. ‚úÖ –ü–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (backend, frontend, infrastructure, tests)
2. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
3. ‚úÖ –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ 95%+
4. ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ (deploy, backup, health-check)
5. ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
6. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Telegram –±–æ—Ç–∞ –≤ CRM —Å–∏—Å—Ç–µ–º—É

---

## üì¶ –ë–≠–ö–ê–ü–´ –°–û–ó–î–ê–ù–´

‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** database-2026-01-05-17-35-58.sql (54KB)
‚úÖ **–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥:** code-2026-01-05-17-35-58.tar.gz (187MB)
‚úÖ **–§–∞–π–ª—ã uploads:** uploads-2026-01-05-17-35-58.tar.gz (118 bytes)
‚úÖ **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**
   - nginx-pbk-crm.conf
   - docker-compose.server.yml
   - playwright.config.js
   - package.json

‚úÖ **–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** BACKUP_INFO.md

---

## üîç –ò–ó–í–ï–°–¢–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ (–Ω–∞ –Ω–∞—á–∞–ª–æ –∞—É–¥–∏—Ç–∞)

### –ò–∑ E2E —Ç–µ—Å—Ç–æ–≤ (8 –ø–∞–¥–∞—é—â–∏—Ö):
1. Dashboard stats cards –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
2. Leads table display - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–µ–ª–µ–∫—Ç–æ—Ä (uses cards not table)
3. Clients "New Client" button - –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞
4. Task creation form –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
5. Calls form fields - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã (3 —Ç–µ—Å—Ç–∞)
6. Lead modal - —Å–µ–ª–µ–∫—Ç–æ—Ä —Å–ª–∏—à–∫–æ–º —à–∏—Ä–æ–∫–∏–π

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
1. PM2 frontend –ø—Ä–æ—Ü–µ—Å—Å—ã - 2 –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ "errored"
2. Telegram bot - sendMessage 400 error (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π chat_id)

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
‚úÖ –û—Ç–ª–∏—á–Ω–æ
- Dashboard load: ~500ms
- API response: ~8ms
- Kanban load: ~2s

---

## üìù –ù–ï–î–ê–í–ù–ò–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞)

1. **2026-01-05 09:50** - DATA_LOADING_FIX.md
   - –ü—Ä–æ–±–ª–µ–º–∞: –î–∞–Ω–Ω—ã–µ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–ª–∏—Å—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
   - –ü—Ä–∏—á–∏–Ω–∞: NEXT_PUBLIC_API_URL=http://backend:5002 –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω –≤ build
   - –†–µ—à–µ–Ω–∏–µ: –£–¥–∞–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω frontend —Å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø—É—Ç—è–º–∏ /api/*
   - –°—Ç–∞—Ç—É—Å: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

2. **2026-01-05 08:52** - LOGIN_FIX_COMPLETE.md
   - –ü—Ä–æ–±–ª–µ–º–∞: –õ–æ–≥–∏–Ω –Ω–µ —Ä–∞–±–æ—Ç–∞–ª –Ω–∞ –ø—É–±–ª–∏—á–Ω–æ–º –¥–æ–º–µ–Ω–µ
   - –†–µ—à–µ–Ω–∏–µ: Nginx reverse proxy –Ω–∞ –ø–æ—Ä—Ç—É 8081
   - –°—Ç–∞—Ç—É—Å: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç

3. **2026-01-04 18:07** - PRODUCTION_DEPLOYMENT_COMPLETE.md
   - –í—Å–µ 16/16 –±–∞–∑–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—à–ª–∏
   - –°–∏—Å—Ç–µ–º–∞ –∑–∞–¥–µ–ø–ª–æ–µ–Ω–∞ –∏ –¥–æ—Å—Ç—É–ø–Ω–∞

---

## ‚öôÔ∏è –°–ï–†–í–ï–†–ù–û–ï –û–ö–†–£–ñ–ï–ù–ò–ï

### –°–µ—Ä–≤–µ—Ä
- **IP:** 100.91.124.46 (Tailscale network)
- **OS:** Ubuntu
- **RAM:** 13GB
- **Disk:** 76GB –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–∑ 148GB

### Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã CRM
- `pbk-frontend` - –ø–æ—Ä—Ç 3010, Healthy, 6h uptime
- `pbk-backend` - –ø–æ—Ä—Ç 5002, Healthy, 23h uptime
- `pbk-telegram` - –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (–∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞–ª)

### –î—Ä—É–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã (–ù–ï –¢–†–û–ì–ê–¢–¨!)
- **–û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–µ–∫—Ç:** /opt/p2p/ (Python/Flask)
- **–ü–æ—Ä—Ç—ã –∑–∞–Ω—è—Ç—ã:** 3007, 3013, 3050, 3456, 5000, 8891
- **Mailserver:** –ø–æ—Ä—Ç—ã 25, 143, 465, 587, 993, 8095
- **Grafana:** –ø–æ—Ä—Ç 3000
- **PostgreSQL@16-main:** –≤–æ–∑–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥—Ä—É–≥–∏–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏

---

## üìÖ –ü–õ–ê–ù –†–ê–ë–û–¢–´

### –§–ê–ó–ê 0: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –±—ç–∫–∞–ø ‚úÖ –ó–ê–í–ï–†–®–ï–ù–ê
- –í—Ä–µ–º—è: 30 –º–∏–Ω—É—Ç
- –†–µ–∑—É–ª—å—Ç–∞—Ç: –ü–æ–ª–Ω—ã–µ –±—ç–∫–∞–ø—ã —Å–æ–∑–¥–∞–Ω—ã

### –§–ê–ó–ê 1: –ì–ª—É–±–æ–∫–∏–π –∞—É–¥–∏—Ç (3-4 —á–∞—Å–∞)
- 1.1: –ê—É–¥–∏—Ç Backend (60 –º–∏–Ω) ‚Üí BACKEND_AUDIT_REPORT.md
- 1.2: –ê—É–¥–∏—Ç Frontend (60 –º–∏–Ω) ‚Üí FRONTEND_AUDIT_REPORT.md
- 1.3: –ê—É–¥–∏—Ç Infrastructure (30 –º–∏–Ω) ‚Üí INFRASTRUCTURE_AUDIT_REPORT.md
- 1.4: –ê—É–¥–∏—Ç Testing (30 –º–∏–Ω) ‚Üí TESTING_AUDIT_REPORT.md

### –§–ê–ó–ê 2: –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–ª–∞–Ω (1 —á–∞—Å)
- –ê–≥—Ä–µ–≥–∞—Ü–∏—è –≤—Å–µ—Ö –ø—Ä–æ–±–ª–µ–º
- –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è P0/P1/P2/P3
- Roadmap –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π ‚Üí FIXES_PRIORITY_PLAN.md
- **–°–¢–û–ü:** –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–ª–∞–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

### –§–ê–ó–ê 3: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (4-6 —á–∞—Å–æ–≤)
- –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- Git commits

### –§–ê–ó–ê 4: –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (3-4 —á–∞—Å–∞)
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–¥–∞—é—â–∏—Ö —Ç–µ—Å—Ç–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤
- –¶–µ–ª—å: 95%+ coverage

### –§–ê–ó–ê 5: –°–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ (2 —á–∞—Å–∞)
- deploy.sh
- backup.sh
- health-check.sh
- CI/CD pipeline

### –§–ê–ó–ê 6: –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (1 —á–∞—Å)
- Production smoke test
- Performance check
- –§–∏–Ω–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## üîê –í–ê–ñ–ù–´–ï –û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø

‚ùå **–ù–ï –¢–†–û–ì–ê–¢–¨:**
- /opt/p2p/ - –æ—Å–Ω–æ–≤–Ω–æ–π production –ø—Ä–æ–µ–∫—Ç
- –ü–æ—Ä—Ç—ã: 3007, 3013, 3050, 3456, 5000, 8891
- PostgreSQL@16-main service
- Mailserver, Grafana, –¥—Ä—É–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã

‚úÖ **–ú–û–ñ–ù–û –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨:**
- –ü–æ—Ä—Ç—ã CRM: 3010 (frontend), 5002 (backend), 8081 (nginx)
- PostgreSQL –±–∞–∑–∞ pbk_crm
- Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã pbk-*
- PM2 –ø—Ä–æ—Ü–µ—Å—Å—ã crm-*

---

## üìû –ö–û–ù–¢–ê–ö–¢–´

**Telegram:** @yostrov
**Chat ID:** 443876287
**–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –±–æ—Ç:** @TerminalWorkspaceAssistant_BOT

---

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –§–ê–ó–ê 1 - –ì–ª—É–±–æ–∫–∏–π –∞—É–¥–∏—Ç –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã
